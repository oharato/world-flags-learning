# 国旗学習アプリ 要件定義書

## 1. 概要

### 1.1. アプリの目的
雑学クイズが好きなユーザーをターゲットとし、ゲーム感覚で楽しみながら国旗を暗記できるWebアプリケーションを提供する。国旗だけでなく、その国の位置や成り立ち、概要といった付随情報も提供し、ユーザーの知的好奇心を満たすことを目指す。

### 1.2. ターゲットユーザー
*   雑学やクイズが好きな人
*   世界の国々について知的好奇心がある人

## 2. 機能要件

### 2.1. クイズモード
1セット10問のクイズに挑戦し、スコアを競うモード。

*   **クイズ形式**：以下の2種類から選択可能とする。
    1.  表示された国旗を見て、4つの選択肢から正しい国名を選ぶ。
    2.  表示された国名を見て、4つの選択肢から正しい国旗を選ぶ。

*   **ゲームフロー**
    1.  トップページで「クイズモード」を選択。
    2.  ニックネームを入力する。（初回のみ、もしくは毎回）
    3.  クイズ形式（上記1, 2）と出題範囲を選択する。
    4.  クイズ開始（全10問）。
    5.  全問回答後、結果画面に遷移。

*   **結果表示**
    *   正解数（/10問）
    *   回答にかかった合計時間
    *   スコア（後述）

### 2.2. ランキング機能
クイズモードの結果をサーバーに記録し、スコアをランキング形式で表示する。

*   **記録する情報**
    *   ニックネーム（localStorageで前回入力した値を保持）
    *   スコア
    *   出題範囲（地域）
    *   達成日時

*   **スコアリング**
    *   正解数と回答時間から算出する。
    *   計算式（案）： `スコア = (正解数 * 1000) - (回答時間[秒] * 10)`
        *   例：10問正解、30秒でクリアした場合 → (10 * 1000) - (30 * 10) = 9700点
        *   例： 8問正解、50秒でクリアした場合 → ( 8 * 1000) - (50 * 10) = 7500点

*   **ランキング表示**
    *   **地域別ランキング**: 全世界、アフリカ、アジア、ヨーロッパ、北アメリカ、南アメリカ、オセアニアから選択可能
    *   **表示タイプ**: 「今日のランキング」と「歴代トップ5」を切り替え可能
    *   **クイズ形式別**: 「国旗 → 国名」と「国名 → 国旗」で別々のランキングを表示
    *   上位3位にはメダル（🥇🥈🥉）を表示
    *   登録日時も表示

*   **クイズ結果画面**
    *   選択した地域のランキングのみを表示
    *   「今日のランキング」を表示

### 2.3. 学習モード
クイズとは別に、じっくりと国旗や国の情報を学べるモード。

*   **形式**：フラッシュカード形式を採用。
    *   カードの表面に「国旗」、裏面に「国名」を表示する。
    *   ユーザーがカードをめくる動作で答え合わせができる。

*   **表示コンテンツ**：カードには以下の情報を含める。
    *   国旗
    *   国名
    *   首都
    *   国の場所を示した簡単な地図（カードの右上に縮小表示）
    *   国旗の成り立ち・意味の解説（マウスホバーまたはタッチで詳細をポップアップ表示）
    *   国の概要（人口、公用語、有名なものなど、マウスホバーまたはタッチで詳細をポップアップ表示）

*   **操作**
    *   矢印キー（←→）で前後のカードに移動
    *   スペースキーで表裏を切り替え
    *   裏面を表示中に次へ進んでも、次のカードは表面から開始

### 2.4. キーボードショートカット
*   **クイズ設定画面**: Ctrl+Enter（または Cmd+Enter）でクイズ開始
*   **クイズ画面**:
    *   デフォルトで左上の選択肢を選択
    *   十字キー（↑↓←→）で選択肢を移動（画面幅により1列/2列グリッドに対応）
    *   Enter キーで選択中の選択肢を選択して次の問題へ
    *   選択中の選択肢は視覚的に強調表示

## 3. 画面構成

1.  **トップページ**
    *   アプリタイトルを表示。
    *   「クイズモード」「学習モード」「ランキングを見る」へのナビゲーションボタンを配置。
2.  **クイズ設定画面**
    *   ニックネーム入力欄（前回入力した値を自動入力）。
    *   クイズ形式の選択肢（国旗→国名、国名→国旗）。
    *   出題範囲の選択肢（全世界、アフリカ、アジア、ヨーロッパ、北アメリカ、南アメリカ、オセアニア）。
    *   問題数の選択肢（10問、20問、30問）。
    *   「スタート」ボタン。
    *   ヒント表示: "Ctrl+Enter でクイズ開始"
3.  **クイズ画面**
    *   問題（国旗 or 国名）を薄い灰色の背景に表示。
    *   選択肢（4つ）をボタンで表示（選択中の選択肢を視覚的に強調）。
    *   現在の問題数（例：3/10）と経過時間を表示。
4.  **結果画面**
    *   正解数、回答時間、スコアを表示。
    *   回答詳細: 各問題の国旗/国名、あなたの回答、正解を一覧表示（ラベルを右寄せで縦に揃える）。
    *   「ランキングを見る」「トップに戻る」ボタンを配置。
5.  **ランキング画面**
    *   地域選択ドロップダウン（全世界、各大陸）。
    *   表示タイプ選択ドロップダウン（今日のランキング、歴代トップ5）。
    *   順位、ニックネーム、スコア、登録日時を一覧で表示。
    *   トップ3にはメダル表示（🥇🥈🥉）。
6.  **学習モード画面**
    *   フラッシュカード形式で国旗や国の情報を表示。
    *   「次へ」「前へ」などのナビゲーション。
    *   矢印キーとスペースキーでの操作をサポート。

## 4. 非機能要件

### 4.1. デザイン
*   全体的に**シンプルでスタイリッシュ**なデザインを採用する。
*   白やグレーを基調とし、アクセントカラーで操作性を高める。
*   等幅フォントを使用し、ラベルの「:」が縦に揃うように配慮。
*   Favicon: 日本の国旗風デザイン（白地に赤丸、灰色の枠）。

### 4.2. 対応デバイス
*   PC、スマートフォンのブラウザに対応するレスポンシブデザインとする。

### 4.3. 多言語対応
*   日本語と英語の2言語に対応。
*   トップページで言語選択が可能。
*   国データ、大陸名、UI表示が選択した言語で表示される。
